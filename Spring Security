âœ… 1ï¸âƒ£ Add Spring Security Dependency
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-security</artifactId>
</dependency>


ğŸ‘‰ By default, Spring Security locks everything.

âœ… 2ï¸âƒ£ Basic Security Configuration (Modern â€“ Spring Security 6+)
@Configuration
@EnableWebSecurity
public class SecurityConfig {

    @Bean
    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
        http
            .csrf(csrf -> csrf.disable())
            .authorizeHttpRequests(auth -> auth
                .requestMatchers("/public/**").permitAll()
                .anyRequest().authenticated()
            )
            .httpBasic(); // basic auth

        return http.build();
    }
}


âœ” /public/** â†’ open
âœ” all other APIs â†’ secured

âœ… 3ï¸âƒ£ In-Memory Authentication (Simple Demo)
@Bean
UserDetailsService userDetailsService() {
    UserDetails user = User.withUsername("admin")
            .password("{noop}password")
            .roles("ADMIN")
            .build();

    return new InMemoryUserDetailsManager(user);
}


âš ï¸ {noop} â†’ no encoding (only for demo)

ğŸ”¥ Interview Line

Spring Security secures REST APIs using filters that intercept requests before reaching controllers.

âœ… 4ï¸âƒ£ Role-Based Authorization
.authorizeHttpRequests(auth -> auth
    .requestMatchers("/admin/**").hasRole("ADMIN")
    .requestMatchers("/user/**").hasAnyRole("USER", "ADMIN")
    .anyRequest().authenticated()
)

âœ… 5ï¸âƒ£ JWT-Based Security (MOST USED â­â­â­â­â­)

ğŸ‘‰ Best for stateless REST APIs / microservices

Flow

User logs in

Server generates JWT

Client sends JWT in Authorization header

Server validates JWT

Authorization: Bearer eyJhbGciOiJIUzI1NiJ9...

JWT Filter (High Level)
OncePerRequestFilter


Extract token

Validate

Set authentication in SecurityContext

Interview Line

JWT enables stateless authentication, making it ideal for scalable REST APIs.

âœ… 6ï¸âƒ£ Disable CSRF (Important for REST)
http.csrf(csrf -> csrf.disable());


ğŸ‘‰ REST APIs donâ€™t use cookies â†’ CSRF not needed.

âœ… 7ï¸âƒ£ Secure Endpoints with Annotations
@PreAuthorize("hasRole('ADMIN')")
@GetMapping("/admin")
public String adminApi() {
    return "admin only";
}


Enable method security:

@EnableMethodSecurity

âœ… 8ï¸âƒ£ Password Encoding (Production MUST)
@Bean
PasswordEncoder passwordEncoder() {
    return new BCryptPasswordEncoder();
}
